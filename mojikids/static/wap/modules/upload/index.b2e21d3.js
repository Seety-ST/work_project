define("wap-kids:upload/index",function(e,i){"use strict";function a(e,i,a){return i in e?Object.defineProperty(e,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[i]=a,e}function t(e){var i=this,e=e||{},a=n.ua;i.$el=e.$el||$("body"),i.type=e.type||"",i.params=e.params||{},i.wx_params=e.wx_params||{},i.app_params=e.app_params||{},i.web_params=e.web_params||{},i.server_url=e.server_url||"http://sendmedia-w.yueus.com:8079/upload.cgi",i.type=a.is_weixin?"wx":o.isPaiApp?"app":"web";var t=window.location.protocol;i.server_url&&"https"==t&&/sendmedia-w/.test(i.server_url)&&(i.server_url="https://sendmedia-w.yueus.com/upload.cgi"),i.init(e)}var s=e.syncLoad("wap-kids:global/wxsdk/index"),o=e.syncLoad("wap-kids:global/app/index"),n=e.syncLoad("wap-kids:global/util/index"),r=n.ua;t.prototype={init:function(){var e=this;e.init_wx(e.wx_params),e.init_app(e.app_params),e.init_web(e.web_params)},init_wx:function(e){var i=this;if(s.isWeiXin()){var a={upload_type:"pics",choose_trigger_str:"chooseImages_test",choose_count:1,server_url:"//www.yueus.com/action/wx_image.php",choose_success:function(){i.$el.trigger("uploadImages_test")},choose_cancel:function(){},choose_fail:function(){},upload_trigger_str:"uploadImages_test",upload_success:function(){},upload_cancel:function(){},upload_fail:function(){},upload_success_all:function(){i.$el.trigger("getImagesUrl_test")},get_trigger_str:"getImagesUrl_test",get_imgUrl_beforeSend:function(){},get_imgUrl_success:function(e){console.info(e)},get_imgUrl_error:function(){},get_imgUrl_complete:function(){}};e=$.extend(a,e,!0),console.log(e),s.chooseImages_and_uploadImages_and_downloadImages(e)}},init_app:function(e){var i=this,a={is_async_upload:0,max_selection:1,is_zip:1};i.app_params=$.extend(a,e,!0)},init_web:function(e){var i=this;if(window.WebUploader&&"web"==i.type){var t,s={poco_id:"10001",sh_type:"merchandise"},o="opus";e.form_data&&(s=e.form_data,o="file");var n="image/*";r.is_mobile||(n=""),s=JSON.stringify(s);var p=(t={auto:!0,file_num_limit:1,fileSizeLimit:9437184,fileSingleSizeLimit:3145728,pick:{id:i.$el.get(0),multiple:!0},duplicate:!0,chunked:!1,chunkSize:524288,server:i.server_url,cover_img:"",runtimeOrder:"html5",headers:{Accept:"application/json, text/javascript, */*; q=0.01"},formData:{params:s,data:s},accept:{title:"Images",extensions:"jpg,jpeg,png",mimeTypes:n},fileVal:o,disableGlobalDnd:!0,fileNumLimit:20},a(t,"fileSizeLimit",209715200),a(t,"fileSingleSizeLimit",52428800),t);e=$.extend(p,e,!0);var c=WebUploader.create(e);"function"==typeof e.ready_ok&&e.ready_ok.call(this,c)}},action:function(){var e=this;switch(e.type){case"wx":e.$el.trigger("chooseImages_test");break;case"app":{var i=e.app_params.m_type||"multi_img";e.app_params.success||function(){}}o.isPaiApp&&o.upload_img(i,e.app_params,function(i){console.log(i),"function"==typeof e.app_params.success&&e.app_params.success.call(this,i)});break;case"web":}}},i.init_com=function(e){return new t(e)}});