define("wap-kids:upload/index",function(e,a){"use strict";function i(e,a,i){return a in e?Object.defineProperty(e,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[a]=i,e}function t(e){var a=this,e=e||{},i=n.ua;a.$el=e.$el||$("body"),a.type=e.type||"",a.params=e.params||{},a.wx_params=e.wx_params||{},a.app_params=e.app_params||{},a.web_params=e.web_params||{},a.server_url=e.server_url||"http://sendmedia-w.yueus.com:8079/upload.cgi",a.type=i.is_weixin?"wx":o.isPaiApp?"app":"web";var t=window.location.protocol;a.server_url&&"https"==t&&/sendmedia-w/.test(a.server_url)&&(a.server_url="https://sendmedia-w.yueus.com/upload.cgi"),a.init(e)}var s=e.syncLoad("wap-kids:global/wxsdk/index"),o=e.syncLoad("wap-kids:global/app/index"),n=e.syncLoad("wap-kids:global/util/index"),r=n.ua;t.prototype={init:function(){var e=this;e.init_wx(e.wx_params),e.init_app(e.app_params),e.init_web(e.web_params)},init_wx:function(e){var a=this;if(s.isWeiXin()){var i={upload_type:"pics",choose_trigger_str:"chooseImages_test",choose_count:1,server_url:"//www.yueus.com/action/wx_image.php",platform:"",choose_success:function(){a.$el.trigger("uploadImages_test")},choose_cancel:function(){},choose_fail:function(){},upload_trigger_str:"uploadImages_test",upload_success:function(){},upload_cancel:function(){},upload_fail:function(){},upload_success_all:function(){a.$el.trigger("getImagesUrl_test")},get_trigger_str:"getImagesUrl_test",get_imgUrl_beforeSend:function(){},get_imgUrl_success:function(e){console.info(e)},get_imgUrl_error:function(){},get_imgUrl_complete:function(){}};e=$.extend(i,e,!0),console.log(e),s.chooseImages_and_uploadImages_and_downloadImages(e)}},init_app:function(e){var a=this,i={is_async_upload:0,max_selection:1,is_zip:1};a.app_params=$.extend(i,e,!0)},init_web:function(e){var a=this;if(window.WebUploader&&"web"==a.type){var t,s={poco_id:"10001",sh_type:"merchandise"},o="opus";e.form_data&&(s=e.form_data,o="file");var n="image/*";r.is_mobile||(n=""),s=JSON.stringify(s);var p=(t={auto:!0,file_num_limit:1,fileSizeLimit:9437184,fileSingleSizeLimit:3145728,pick:{id:a.$el.get(0),multiple:!0},duplicate:!0,chunked:!1,chunkSize:524288,server:a.server_url,cover_img:"",runtimeOrder:"html5",headers:{Accept:"application/json, text/javascript, */*; q=0.01"},formData:{params:s,data:s},accept:{title:"Images",extensions:"jpg,jpeg,png",mimeTypes:n},fileVal:o,disableGlobalDnd:!0,fileNumLimit:20},i(t,"fileSizeLimit",209715200),i(t,"fileSingleSizeLimit",52428800),t);e=$.extend(p,e,!0);var c=WebUploader.create(e);"function"==typeof e.ready_ok&&e.ready_ok.call(this,c)}},action:function(){var e=this;switch(e.type){case"wx":e.$el.trigger("chooseImages_test");break;case"app":{var a=e.app_params.m_type||"multi_img";e.app_params.success||function(){}}o.isPaiApp&&o.upload_img(a,e.app_params,function(a){console.log(a),"function"==typeof e.app_params.success&&e.app_params.success.call(this,a)});break;case"web":}}},a.init_com=function(e){return new t(e)}});