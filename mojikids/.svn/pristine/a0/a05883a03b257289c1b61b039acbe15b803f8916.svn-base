define('wap-kids:widget/date/date', function(require, exports, module) {

  "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Util=require.syncLoad("wap-kids:global/util/index");exports.default={name:"moji-date",props:{show_date:{type:Boolean,"default":!1},canbook_days_list:{type:Array},schedule_id:{type:String}},created:function(){this.initData(null)},data:function(){return{currentMonth:1,currentYear:1970,currentWeek:1,days:[],choose_time:"",choose_time_format:"",child_canbook_days_list:this.canbook_days_list,show_date_detail_list:!1,date_detail_list:[],date_detail_key_list:{},config_week_array:["周日","周一","周二","周三","周四","周五","周六"]}},computed:{},methods:{initData:function(t){var e;e=t?new Date(t):new Date,this.currentYear=e.getFullYear(),this.currentMonth=e.getMonth()+1,e.setDate(1),this.currentWeek=e.getDay(),console.log(this.currentWeek),this.currentWeek=this.currentWeek+1;var a=e.getDate(),i=this.formatDate(this.currentYear,this.currentMonth,a);console.log("当月的第一天:"+i+","+this.currentWeek);var s=[],l=this.child_canbook_days_list,n=l.length;this.date_detail_key_list={};for(var o=0;n>o;o++){s.push(new Date(l[o].date));var r=l[o].date;this.date_detail_key_list[r]=l[o].timezone}this.days.length=0;for(var o=this.currentWeek-1;o>=0;o--){var c=new Date(i);c.setDate(c.getDate()-o);var d="";this.in_array(c,s)||(d="full");var _={date:c,active_class:"",full_class:d};this.days.push(_)}for(var o=1;o<=42-this.currentWeek;o++){var c=new Date(i);c.setDate(c.getDate()+o);var d="";this.in_array(c,s)||(d="full");var h={date:c,active_class:"",full_class:d};this.days.push(h)}},in_array:function(t,e){for(var a=0;a<e.length;a++){var i=e[a].toString();if(i==t)return!0}return!1},pick:function(t){if(console.log("点中了时间"),t.getMonth()+1!=this.currentMonth)return void console.log("点击了非本月的");for(var e=this.days.length,a=this.days,i=0;e>i;i++)if(a[i].date==t&&"full"==a[i].full_class)return void console.log("点击了档期满的");for(var s=0;e>s;s++)a[s].active_class="",t==a[s].date&&(a[s].active_class=t.getDate()>9?"active-big":"active-little");var l=this.formatDate(t.getFullYear(),t.getMonth()+1,t.getDate());console.log("date_key"+l),this.date_detail_list=this.date_detail_key_list[l],this.show_date_detail_list=!0,this.choose_time=this.formatDate(t.getFullYear(),t.getMonth()+1,t.getDate()),this.choose_time_format=this.formatDate_text(t.getFullYear(),t.getMonth()+1,t.getDate(),t);for(var n=this.date_detail_list.length,i=0;n>i;i++)this.date_detail_list[i].click_cur=""},ajax_get_date:function(t,e){var a=this,i=a.schedule_id;Util.request({url:window.__MOJIKIDS_GLOBAL.AJAX_DOMAIN+"order/get_date.php",type:"GET",cache:!0,data:{date:e,schedule_id:i},beforeSend:function(){Util.toast({message:"获取日期中...",position:"middle",duration:1e3})},success:function(e){if(console.log(e.res.list),e.res.list.length>0)var i=e.res.list.length;else var i=0;console.log("返回长度"+i),a.child_canbook_days_list=[];for(var s=0;i>s;s++)e.res.list[s]&&a.child_canbook_days_list.push(e.res.list[s]);a.initData(a.formatDate(t.getFullYear(),t.getMonth()+1,1)),a.show_date_detail_list=!1},error:function(){Util.toast({message:"获取档期日期失败，请切换日期再试",position:"middle",duration:1e3})}})},pickPre:function(t,e){var a=new Date(this.formatDate(t,e,1));a.setDate(0),console.log("上个年月"+a.getFullYear()+(a.getMonth()+1)),this.date_detail_list={};var i=this.formatDate_ym(a.getFullYear(),a.getMonth()+1);console.log(i),this.ajax_get_date(a,i)},pickNext:function(t,e){var a=new Date(this.formatDate(t,e,1));a.setDate(42),console.log("下个年月"+a.getFullYear()+(a.getMonth()+1)),this.date_detail_list={};var i=this.formatDate_ym(a.getFullYear(),a.getMonth()+1);console.log(i),this.ajax_get_date(a,i)},pick_detail:function(t,e,a){console.log("选中的时间为"+this.choose_time+" "+t),console.log("item的value值为"+e),console.log("选中的index值："+a);for(var i=this.date_detail_list.length,s=0;i>s;s++)this.date_detail_list[s].click_cur="",s==a&&(this.date_detail_list[s].click_cur="detail-list-item-cur");console.log(this.choose_time);var l=JSON.parse(JSON.stringify(this.choose_time)),n=e,o=JSON.parse(JSON.stringify(this.choose_time_format))+" "+t;console.log(l),this.$emit("pick_detail",l,n,o)},formatDate:function(t,e,a){var i=t,s=e;10>s&&(s="0"+s);var l=a;return 10>l&&(l="0"+l),i+"-"+s+"-"+l},formatDate_ym:function(t,e){var a=t,i=e;return 10>i&&(i="0"+i),a+""+i},formatDate_text:function(t,e,a,i){var s=this.config_week_array,l=i.getDay(),n=s[l],o=t+"年"+e+"月"+a+"日（"+n+"）";return o}}},function(t){module&&module.exports&&(module.exports.template=t),exports&&exports.default&&(exports.default.template=t)}('<div class="date-container" id="date-container" v-if="show_date">\n    <div class="date-nav ui-border-b clearfix">\n        <div class="nav-icon fl" @click="pickPre(currentYear,currentMonth)">\n            <i class="icon-allow-grey icon-allow-grey-left"></i>\n        </div>\n        <div class="nav-text tc f16 color-111 dib fl">{{ currentYear }}年{{ currentMonth }}月</div>\n        <div class="nav-icon fr" @click="pickNext(currentYear,currentMonth)">\n            <i class="icon-allow-grey"></i>\n        </div>\n    </div>\n\n    <div class="date-content">\n        <div class="content-tips pt10 pb5 color-666 f12 tc">\n            注：<span class="color-css">灰色</span>为已约满，<span class="main-color">黄色</span>为可预约的哟~\n        </div>\n        <div class="content-main">\n            <!--时间内容-->\n            <ul class="weekdays color-111">\n                <li>日</li>\n                <li>一</li>\n                <li>二</li>\n                <li>三</li>\n                <li>四</li>\n                <li>五</li>\n                <li>六</li>\n            </ul>\n            <ul class="days">\n                <li @click="pick(day.date)" v-for="day in days">\n                    <span v-if="day.date.getMonth()+1 != currentMonth" class="other-month">{{ day.date.getDate() }}</span>\n                    <span v-else="" :class="[day.active_class,day.full_class]">{{ day.date.getDate() }}</span>\n                </li>\n            </ul>\n\n        </div>\n    </div>\n\n    <div class="date-detail-list">\n        <div class="detail-list-title">请选择时间点：<span class="title-tips main-color" v-show="show_date_detail_list ? false : true">（请先选择日期）</span></div>\n        <ul class="detail-list clearfix" v-show="show_date_detail_list">\n            <li class="detail-list-item" :class="item.click_cur" v-for="(item,index) in date_detail_list" @click="pick_detail(item.title,item.value,index)">{{ item.title }}</li>\n        </ul>\n    </div>\n</div>');

});
