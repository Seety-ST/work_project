(function(){function d(){this._listener=[]}d.prototype.bind=function(i,k){var j=this._listener[i]||[];j.push(k);this._listener[i]=j};d.prototype.trigger=function(i){var j=Array.prototype.slice.apply(arguments).slice(1);var k=this._listener[i];if(!Array.isArray(k)){return}k.forEach(function(m){try{m.apply(this,j)}catch(l){console.error(l)}})};var a=function(o,k){if(!o){return}var q=o.className;var n=(k||"").split(" ");for(var m=0,l=n.length;m<l;m++){var p=n[m];if(!p){continue}if(o.classList){o.classList.add(p)}else{if(!hasClass(o,p)){q+=" "+p}}}if(!o.classList){o.className=q}};var g=function(o,k){if(!o||!k){return}var n=k.split(" ");var q=" "+o.className+" ";for(var m=0,l=n.length;m<l;m++){var p=n[m];if(!p){continue}if(o.classList){o.classList.remove(p)}else{if(hasClass(o,p)){q=q.replace(" "+p+" "," ")}}}if(!o.classList){o.className=trim(q)}};var h=(function(){if(document.addEventListener){return function(i,k,j){if(i&&k&&j){i.addEventListener(k,j,false)}}}else{return function(i,k,j){if(i&&k&&j){i.attachEvent("on"+k,j)}}}})();var c=(function(){if(document.removeEventListener){return function(i,k,j){if(i&&k){i.removeEventListener(k,j,false)}}}else{return function(i,k,j){if(i&&k){i.detachEvent("on"+k,j)}}}})();var f=function(n,p,r){n=n||{};var k=typeof p,o=1,q;if(k==="undefined"||k==="boolean"){r=k==="boolean"?p:false;p=n;n=this}if(typeof p!=="object"&&Object.prototype.toString.call(p)!=="[object Function]"){p={}}while(o<=2){q=o===1?n:p;if(q!=null){for(var m in q){var j=n[m],l=q[m];if(n===l){continue}if(r&&l&&typeof l==="object"&&!l.nodeType){n[m]=this.extend(j||(l.length!=null?[]:{}),l,r)}else{if(l!==undefined){n[m]=l}}}}o++}return n};var e=function(i,k){var j=document.createElement("script");k=k||function(){};j.type="text/javascript";j.src=i;document.getElementsByTagName("head")[0].appendChild(j);j.onload=k};function b(j){var i=this;var j=j||{};i.$ele=j.ele;i.wx_json=j.wx_json||{};i.__SHARE_TEXT=j.share_text;i.App=j.App;i.UA=j.UA;i.showtopmenu=j.showtopmenu==null?true:false;i.init()}b.prototype={init:function(){var i=this;i.__SHARE_TEXT.pic=i.__SHARE_TEXT.img;if(!i.__SHARE_TEXT.img||!i.__SHARE_TEXT.url||!i.__SHARE_TEXT.qrcodeurl||!i.__SHARE_TEXT.url_v3){alert("缺少分享参数")}i.emitter=new d();if(i.UA.is_weixin){var k=['<div class="share-fade fn-hide" data-role="share-fade">','    <div class="sharebox" data-role="sharebox"></div>',"</div>"].join("");var j=document.createElement("div");j.innerHTML=k;document.body.appendChild(j);i.wx_event()}else{if(i.UA.is_yue_app||i.UA.is_yue_seller){i.app_event()}else{if(/MQQBrowser\/(\/[\d\.]+)*/i.test(window.navigator.userAgent)){e("http://qzonestyle.gtimg.cn/qzone/qzact/common/share/share.js",function(){i.qq_event()})}else{var k=['<div class="sharebox-rests fn-hide" data-role="sharebox-rests">','            <div class="share-content">','                <span class="yueyue_share_icon sina" data-role="sina"></span>','                <span class="yueyue_share_icon qqzone" data-role="qzone"></span>',"            </div>",'            <div class="share-close" data-role="share-close">取消</div>',"        </div>"].join("");var j=document.createElement("div");j.innerHTML=k;document.body.appendChild(j);i.wap_event()}}}i.includeLinkStyle("http://www.mojikids.com/static/wap/js/share/share.min.css")},wx_event:function(){var k=this;if(k.UA.is_weixin){var i=document.querySelector('[data-role="share-fade"]');h(i,"click",function(){k.hide_layer()});var n={};var j={};var l=window.location;var m=k.__SHARE_TEXT;n={title:m.title,desc:m.content,link:m.url,imgUrl:m.img+new Date().getTime(),type:"link",dataUrl:"",success:function(o){console.log(o);k.action(o.errMsg)},cancel:function(o){}};j={title:m.title,desc:m.content,link:m.url,imgUrl:m.img+new Date().getTime(),type:"link",dataUrl:"",success:function(o){k.action(o.errMsg)},cancel:function(){}};window.__wx_common_share=n;window.__wx_common_timeline=j;wx.ready(function(){wx.onMenuShareAppMessage(window.__wx_common_share);wx.onMenuShareTimeline(window.__wx_common_timeline);wx.onMenuShareQQ(window.__wx_common_share);wx.onMenuShareQZone(window.__wx_common_share)})}},app_event:function(k){var i=this;if(!k){var j=i.__SHARE_TEXT}if(i.App&&i.App.isPaiApp){window.$_AppCallJSObj=document.body;h(window.$_AppCallJSObj,"onShare",function(l,m){if(m){i.action(m.share_type)}});h(i.$ele,"click",function(){j=f(j,{jscbfunc:"onShare"});i.App.share_card(j,function(l){})});window.__YUEYUE__APP__={};window.__YUEYUE__APP__.SHARE_INFO=j;window.__YUEYUE__APP__.SHARE_INFO.success=function(l){i.action(l.share_type);console.log(l)};i.App.showtopmenu(i.showtopmenu)}},wap_event:function(n){var s=this;var k=document.querySelector('[data-role="sharebox-rests"]');var r=document.querySelector('[data-role="share-close"]');var j=document.querySelector('[data-role="sina"]');var q=document.querySelector('[data-role="qzone"]');if(n){var l=n}else{var l=s.__SHARE_TEXT}var m=encodeURI(l.img);var o=l.content;var p=l.title;var i=encodeURI(l.url);h(j,"click",function(){s.action("wap_sina");s.hide_layer();window.open("http://www.yueus.com/action/send_share.php?url="+i+"&title="+p+"&content="+p+"&pic="+m+"&sign=sina")});h(q,"click",function(){s.action("wap_qzone");s.hide_layer();window.open("http://www.yueus.com/action/send_share.php?url="+i+"&title="+p+"&content="+p+"&pic="+m+"&sign=qzone")});h(r,"click",function(){s.hide_layer()})},qq_event:function(k){var i=this;if(k){var j=k}else{var j=i.__SHARE_TEXT}setShareInfo({title:j.title,summary:j.content,pic:j.img+new Date().getTime(),url:j.url})},action:function(k){var i=this;var j="";switch(k){case"shareTimeline:ok":j="wx_timeline";break;case"sendAppMessage:ok":j="wx_friend";break;case"shareQQ:ok":j="wx_qq";break;case"shareQZone:ok":j="wx_qzone";break;case"wxsession":j="app_wx_friend";break;case"wxsession":j="app_wx_friend";break;case"wxtimeline":j="app_wx_timeline";break;case"qq":j="app_qq";break;case"qzone":j="app_qzone";break;case"sina":j="app_sina";break;case"wap_sina":j="wap_sina";break;case"wap_qzone":j="wap_qzone";break}i.emitter.trigger("share_success",j)},change_share_text:function(k,m){var i=this;var n=k;if(i.App&&i.App.isPaiApp){h(window.$_AppCallJSObj,"onShare",function(o,p){if(p){i.action(p.share_type)}});if(m){i.App.share_card(n,function(o){})}}else{if(i.UA.is_weixin){var n=k;var l=window.__wx_common_share;var j=window.__wx_common_timeline;l.title=n.title;l.desc=n.content;l.imgUrl=n.img;j.title=n.title;j.desc=n.content;j.imgUrl=n.img;wx.onMenuShareAppMessage(l);wx.onMenuShareTimeline(j);wx.onMenuShareQQ(l);wx.onMenuShareQZone(l)}else{if(i.UA.is_qq){i.qq_event(n)}else{i.wap_event(n)}}}},includeLinkStyle:function(i){var j=document.createElement("link");j.rel="stylesheet";j.type="text/css";j.href=i;document.getElementsByTagName("head")[0].appendChild(j)},show_layer:function(){var j=this;var i=document.querySelector('[data-role="share-fade"]');var k=document.querySelector('[data-role="sharebox-rests"]');if(j.UA.is_weixin){g(i,"fn-hide")}else{g(k,"fn-hide")}},hide_layer:function(){var j=this;var k=document.querySelector('[data-role="sharebox-rests"]');var i=document.querySelector('[data-role="share-fade"]');if(j.UA.is_weixin){a(i,"fn-hide")}else{a(k,"fn-hide")}}};window.yueyue_share_class=b})();