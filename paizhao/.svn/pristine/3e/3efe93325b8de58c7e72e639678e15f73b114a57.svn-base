define("pc-huipai:global/location_sel/location_sel",function(i,t,a){function o(i){var t=this,i=i||{};t.list_type=i.list_type||"list",t.can_use_district=i.can_use_district||!1,t.$province_data=i.$province_data||$("[data-role='province-data']"),t.$city_data=i.$city_data||$("[data-role='city-data']"),t.$district_data=i.$district_data||$("[data-role='district-data']"),t.$common_data=i.$common_data||$("[common-data-role='common-data']"),t.$province_data_list=i.$province_data_list||$("[data-role='province-data-list']"),t.$city_data_list=i.$city_data_list||$("[data-role='city-data-list']"),t.$district_data_list=i.$district_data_list||$("[data-role='district-data-list']"),t.$common_data_list=i.$common_data_list||$("[common-data-role='common-data-list']"),t.condition_list=i.condition_list||{},t.location_json_obj=i.location_json_obj||{},t.province_id=i.province_id||"101029",t.city_id=i.city_id||"101029001",t.district_id=i.district_id||"101029001001",t.$trigger_obj=i.$trigger||$("[data-role='location-li']"),t.$close_trigger_obj=i.$close_trigger_obj||$("[data-role='location-list-close']");var a=JSON.parse(t.location_json_obj.province),o=JSON.parse(t.location_json_obj.city),l=JSON.parse(t.location_json_obj.district);return t.province_obj=a,t.city_obj=o,t.district_obj=l,t.init(i),t}o.prototype={init:function(){var i=this,t=i.province_id,a=i.city_id,o=i.district_id,l=i.can_use_district;i._render_tab_list("province","0",t),i._render_tab_list("city",t,a),l&&i._render_tab_list("district",a,o),i._render_list("province","0"),i._render_list("city",t),l&&i._render_list("district",a),i._event_bind()},_get_list_obj_by_id:function(i,t){var a=this,o=a.province_obj,l=a.city_obj,s=a.district_obj;switch(i){case"province":var c=o;break;case"city":var c=l;break;case"district":var c=s}var r=[],e=c.length;console.log(i+"get_list:"+e);for(var d=0,_=0;e>_;_++)c[_].parent_id==t&&(r[d]=c[_],d++);return c=r},_get_location_name_by_id:function(i,t,a){var o=this,l=o._get_list_obj_by_id(i,t);console.log("parent_location_id:"+t),console.log(l);var s="";if(l)if(""!=a){for(var c=l.length,r=0;c>r;r++)if(a==l[r].location_id){s=l[r].location_name;break}}else s="请选择";return console.log(s),s},_render_list:function(i,t){var a=this,o=(a.can_use_district,a.province_id),l=a.city_id,s=a.district_id,c=a._get_list_obj_by_id(i,t),r='<ul class="location-tab-detail-list">',e="</ul>",d="";if(c)for(var _=c.length,n=0;_>n;n++)switch(i){case"province":d+=o==c[n].location_id?'<li class="li-cur" data-role="province-detail" data-id="'+c[n].location_id+'">'+c[n].location_name+"</li>":'<li data-role="province-detail" data-id="'+c[n].location_id+'">'+c[n].location_name+"</li>";break;case"city":d+=l==c[n].location_id?'<li class="li-cur" data-role="city-detail" data-id="'+c[n].location_id+'">'+c[n].location_name+"</li>":'<li data-role="city-detail" data-id="'+c[n].location_id+'">'+c[n].location_name+"</li>";break;case"district":d+=s==c[n].location_id?'<li class="li-cur" data-role="district-detail" data-id="'+c[n].location_id+'">'+c[n].location_name+"</li>":'<li data-role="district-detail" data-id="'+c[n].location_id+'">'+c[n].location_name+"</li>"}var v=r+d+e;switch(i){case"province":a.$province_data_list.html(v);break;case"city":a.$city_data_list.html(v);break;case"district":a.$district_data_list.html(v)}},_render_tab_list:function(i,t,a){var o=this,l="",s="",c="",r="",e=o.$province_data,d=o.$city_data,_=o.$district_data,n=o.$province_data_list,v=o.$city_data_list,$=o.$district_data_list;switch(i){case"province":r=o._get_location_name_by_id("province",t,a),l=r+'<i class="arrow-icon"></i>',s='请选择<i class="arrow-icon"></i>',c='请选择<i class="arrow-icon"></i>',e.html(l),d.html(s),_.html(c),n.removeClass("dn"),v.hasClass("dn")||v.addClass("dn"),$.hasClass("dn")||$.addClass("dn");break;case"city":r=o._get_location_name_by_id("city",t,a),e.removeClass("li-cur"),s=r+'<i class="arrow-icon"></i>',c='请选择<i class="arrow-icon"></i>',d.addClass("li-cur"),d.html(s),_.html(c),n.hasClass("dn")||n.addClass("dn"),v.removeClass("dn"),$.hasClass("dn")||$.addClass("dn");break;case"district":d.removeClass("li-cur"),r=o._get_location_name_by_id("district",t,a),c=r+'<i class="arrow-icon"></i>',_.addClass("li-cur"),_.html(c),n.hasClass("dn")||n.addClass("dn"),v.hasClass("dn")||v.addClass("dn"),$.removeClass("dn")}},_event_bind:function(){var i=this,t=i.can_use_district,a=i.$common_data,o=i.$common_data_list,l=i.$trigger_obj,s=i.$close_trigger_obj;l.on("mouseenter",function(){$(this).hasClass("location-li-cur")||$(this).addClass("location-li-cur")}),s.on("click",function(i){i.stopPropagation(),l.hasClass("location-li-cur")?l.removeClass("location-li-cur"):l.addClass("location-li-cur")}),o.on("click",function(a){var o=a.target,l=$(o).attr("data-role"),s=$(o).attr("data-id");if(console.log("点击了列表"),console.log("data_role=:"+l),console.log("data_id=:"+s),"province-detail"==l)console.log("省列表点击"),i._render_tab_list("province","0",s),i._render_tab_list("city",s,""),i._render_list("city",s),$("[data-role='province-detail']").each(function(){$(this).removeClass("li-cur"),$(this).attr("data-id")==s&&$(this).addClass("li-cur")}),$("[data-role='city-detail']").each(function(){$(this).removeClass("li-cur")}),t&&i.$district_data_list.find("ul").html("");else if("city-detail"==l)if(console.log("市列表点击"),t){var c=$(".li-cur[data-role='province-detail']").attr("data-id");i._render_tab_list("city",c,s),i._render_tab_list("district",s,""),i._render_list("district",s),$("[data-role='city-detail']").each(function(){$(this).removeClass("li-cur"),$(this).attr("data-id")==s&&$(this).addClass("li-cur")})}else{var r=i.condition_list,e=r.local_link_url+r.local_ev_photographer_str+r.local_ev_type_str+r.local_ev_style_str+"&"+r.local_sort_str+r.local_order_str+"lid="+s+"&"+r.local_keyword_str+"s=1";window.location.href=e}else if("district-detail"==l){console.log("区列表点击");var r=i.condition_list,e=r.local_link_url+r.local_ev_photographer_str+r.local_ev_type_str+r.local_ev_style_str+"&"+r.local_sort_str+r.local_order_str+"lid="+s+"&"+r.local_keyword_str+"s=1";window.location.href=e}}),a.on("click",function(){var i=$(this).attr("data-role");if(""!=i){console.log("点击了common_data"),console.log("data_role:"+i),console.log(o);var t=o.length;console.log("common_list_len:"+t);for(var l=0;t>l;l++)$(o[l]).hasClass("dn")||$(o[l]).addClass("dn"),$(a[l]).hasClass("li-cur")&&$(a[l]).removeClass("li-cur");$("[data-role='"+i+"-list']").removeClass("dn"),$("[data-role='"+i+"']").addClass("li-cur")}})}},a.exports=o});